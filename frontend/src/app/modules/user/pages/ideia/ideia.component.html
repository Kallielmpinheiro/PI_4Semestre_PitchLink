<div class="flex flex-col justify-center items-center  w-full bg-azul-profundo ">
    <div class="flex flex-col  gap-2 max-[485px]:max-w-72 mt-32">
        <div class="w-full flex items-center justify-center max-lg:flex-col gap-4" >
            <div class="flex flex-grow items-center  justify-center flex-col h-full  bg-azul-profundo w-full max-w-md  ">
                <h1 class="text-white font-bold text-4xl mb-5  max-[485px]:text-2xl">Adicione sua ideia</h1>
                <div class=" w-full max-w-md">
                    <form [formGroup]="formNewIdea">
                        <div class="w-full mb-4">
                            <div class="mb-2">
                                <label for="firstName" class="block mb-2 text-sm font-medium text-white">Nome da ideia</label>
                                <input 
                                    type="text" 
                                    id="nameIdeia" 
                                    formControlName="nameIdeia"
                                    class="border text-sm rounded-lg block w-full p-2.5 bg-gray-700 border-gray-600 placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500"
                                    placeholder="Nome da idea" 
                                    autocomplete="off"
                                />
                                @if (submitForm && !formNewIdea.controls.nameIdeia.valid  ) {
                                    <app-alert-form textAlert="{{ formNewIdea.controls.nameIdeia.touched }}" />
                                }
                                    
                            </div>
                        </div>     
                        <div class="w-full mb-4">
                            <div class="mb-2">
                                <label for="descriptionIdeia" class="block mb-2 text-sm font-medium text-white">Descrição</label>
                                <textarea 
                                    id="descriptionIdeia" 
                                    formControlName="descriptionIdeia"
                                    rows="4"
                                    maxlength="255"
                                    class="block p-2.5 w-full text-sm  rounded-lg border  bg-gray-700 border-gray-600 placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500" 
                                    placeholder="Escreva sobre a sua idea..."
                                    autocomplete="off"
                                ></textarea>
                            </div>
                        </div> 
                        <div class="w-full mb-4 flex gap-2">
                            <div class="w-full mb-4">
                                <div class="mb-2">
                                    <label for="valueInvestment" class="block mb-2 text-sm font-medium text-white">Investimento Mínimo</label>
                                    <div class="relative w-full">
                                        <div  class=" no-spinner absolute inset-y-0 start-0 top-0 flex items-center ps-3.5 pointer-events-none">
                                            <svg class="w-4 h-4 text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16">
                                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 2a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1M2 5h12a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1Zm8 5a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z"/>
                                            </svg>
                                        </div>
                                        <input 
                                            type="number" 
                                            id="valueInvestment" 
                                            formControlName="valueInvestment"
                                            class="appearance-none block p-2.5 w-full rounded-lg z-20 ps-10 text-sm rounded-s-lg border-e-2 border  focus:ring-blue-500 bg-gray-700 border-e-gray-700  border-gray-600 placeholder-gray-400 text-white focus:border-blue-500" 
                                            placeholder="Investimento" 
                                            required 
                                        />
                                    </div>
                                </div>
                            </div>     
                            <div class="w-full mb-4">
                                <div class="mb-2">
                                    <label for="valueIPercentnvestment" class="block mb-2 text-sm font-medium text-white">Percentual Investimento %</label>
                                    <div class="relative w-full">
                                        <div  class=" absolute inset-y-0 start-0 top-0 flex items-center ps-3.5 pointer-events-none">
                                            <svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 384 512">
                                                <path fill="#9ca3af" d="M374.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-320 320c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l320-320zM128 128A64 64 0 1 0 0 128a64 64 0 1 0 128 0zM384 384a64 64 0 1 0 -128 0 64 64 0 1 0 128 0z"/>
                                            </svg>
                                        </div>
                                        <input 
                                            type="number" 
                                            id="valueIPercentInvestment" 
                                            formControlName="valueIPercentInvestment"
                                            class="appearance-none block p-2.5 w-full rounded-lg z-20 ps-10 text-sm rounded-s-lg border-e-2 border  focus:ring-blue-500 bg-gray-700 border-e-gray-700  border-gray-600 placeholder-gray-400 text-white focus:border-blue-500" 
                                            placeholder="Percentual"
                                            required 
                                            (change)="validationPercent()"
                                        />
                                    </div>
                                </div>
                            </div>                        
                        </div>  
                        <div class="w-full mb-4">
                            <button 
                                data-modal-target="select-modal" 
                                data-modal-toggle="select-modal"
                                class="block text-white  focus:outline-none font-medium rounded-full text-sm px-5 py-2.5 text-center border-blue-800 border hover:bg-blue-700  mb-4"
                                type="button">
                                + Categorias
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="grid grid-cols-3 gap-4 max-sm:grid-cols-2">
                @for (preview of previewImages; track $index) {
                    <div class="flex justify-center items-center gap-4">
                        <div class="relative w-40 h-60 border-4 rounded-xl border-gray-500 flex items-center justify-center">
                            <img 
                                [src]="preview" 
                                class="w-full h-full object-cover rounded-xl" 
                                loading="lazy"
                            >
                            <button 
                                (click)="removeImage($index)" 
                                class="absolute -bottom-3 -right-3 bg-red-500 text-white rounded-full w-12 h-12 flex items-center justify-center shadow cursor-pointer"
                            >
                                <svg class="w-6 h-6 text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M6 18L18 6M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                }
            
                @if (previewImages.length < 6) {
                    <div class="flex justify-center items-center gap-4">
                        <div class="relative w-40 h-60 border-4 border-dashed rounded-xl border-gray-500 flex items-center justify-center">
                            <input 
                                type="file" 
                                id="imageInput" 
                                accept="image/*" 
                                class="hidden" 
                                (change)="onFileSelected($event)"
                                multiple
                            >
                            <label 
                                for="imageInput" 
                                class="absolute -bottom-3 -right-3 bg-red-500 text-white rounded-full w-12 h-12 flex items-center justify-center shadow cursor-pointer"
                            >
                                <svg 
                                    class="w-6 h-6 text-white" 
                                    aria-hidden="true" 
                                    xmlns="http://www.w3.org/2000/svg"            
                                    width="24" 
                                    height="24" 
                                    fill="currentColor" 
                                    viewBox="0 0 24 24">
                                    <path fill-rule="evenodd" d="M11.32 6.176H5c-1.105 0-2 .949-2 2.118v10.588C3 20.052 3.895 21 5 21h11c1.105 0 2-.948 2-2.118v-7.75l-3.914 4.144A2.46 2.46 0 0 1 12.81 16l-2.681.568c-1.75.37-3.292-1.263-2.942-3.115l.536-2.839c.097-.512.335-.983.684-1.352l2.914-3.086Z" clip-rule="evenodd" />
                                    <path fill-rule="evenodd" d="M19.846 4.318a2.148 2.148 0 0 0-.437-.692 2.014 2.014 0 0 0-.654-.463 1.92 1.92 0 0 0-1.544 0 2.014 2.014 0 0 0-.654.463l-.546.578 2.852 3.02.546-.579a2.14 2.14 0 0 0 .437-.692 2.244 2.244 0 0 0 0-1.635ZM17.45 8.721 14.597 5.7 9.82 10.76a.54.54 0 0 0-.137.27l-.536 2.84c-.07.37.239.696.588.622l2.682-.567a.492.492 0 0 0 .255-.145l4.778-5.06Z" clip-rule="evenodd" />
                                </svg>
                            </label>
                            <span class="text-gray-500 text-sm text-center">
                                Clique para adicionar imagem
                            </span>
                        </div>
                    </div>
                }
            
                @for (item of getRemainingSlots(); track $index) {
                    <div class="flex justify-center items-center gap-4">
                        <div class="relative w-40 h-60 border-4 border-dashed rounded-xl border-gray-300 flex items-center justify-center opacity-50">
                        </div>
                    </div>
                }
            </div>
        </div>
        <div class="w-full   mt-4 mb-4">
            <button 
                type="submit" 
                (click)="submitFomr()"
                class="text-white block focus:ring-4 focus:outline-none font-medium rounded-lg text-sm w-full  px-5 py-2.5 text-center bg-blue-600 hover:bg-blue-700 focus:ring-blue-800"
            >
            Salvar </button>
        </div> 
        
    </div>
   
</div>



<app-modal>
    <div class="p-4 md:p-5" [formGroup]="formNewIdea">
        <p class=" text-gray-400 mb-4">Selecione as categorias de seu interesse:</p>
        <ul id="categoriesItens" class="flex flex-wrap justify-center w-full mb-4 gap-2"
            formArrayName="categoriesItens">

            @for (item of formNewIdea.controls['categoriesItens'].value; track $index) {
                <li>
                    <input type="checkbox" class="peer hidden" [formControlName]="$index" id="{{ $index }}">
                    <label for="{{ $index }}"
                        class="inline-flex items-center justify-between w-full p-3 text-gray-500 bg-white border-2 border-gray-200 rounded-lg cursor-pointer dark:hover:text-gray-300 dark:border-gray-700 peer-checked:border-blue-600 dark:peer-checked:border-blue-600 hover:text-gray-600 dark:peer-checked:text-gray-300 peer-checked:text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:bg-gray-800 dark:hover:bg-gray-700">
                        <div class="block">
                            <div class="w-full text-sm font-semibold"> {{ categories[$index] }} </div>
                        </div>
                    </label>
                </li>
            }
        </ul>

        
        <button data-modal-toggle="select-modal"
            class="text-white inline-flex w-full justify-center focus:ring-4 focus:outline-none  font-medium rounded-lg text-sm px-5 py-2.5 text-center bg-blue-600 hover:bg-blue-700 focus:ring-blue-800">
            Salvar
        </button>
    </div>


</app-modal>

<app-response-modal
  [visible]="responseModalVisible"
  [config]="responseModalConfig"
  (onConfirm)="onResponseModalConfirm()"
  (onCancel)="closeResponseModal()"
  (onClose)="closeResponseModal()">
</app-response-modal>

  